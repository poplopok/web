{"ast":null,"code":"import axios from 'axios';\nexport const SET_X = 'SET_X';\nexport const SET_Y = 'SET_Y';\nexport const SET_R = 'SET_R';\nexport const ADD_POINT = \"ADD_POINT\";\nexport const SET_TABLE = \"SET_TABLE\";\nexport const SET_ANSWER = \"SET_ANSWER\";\nexport function setX(X) {\n  return {\n    type: SET_X,\n    payload: X\n  };\n}\nexport function setY(Y) {\n  return {\n    type: SET_Y,\n    payload: Y\n  };\n}\nexport function setR(R) {\n  return {\n    type: SET_R,\n    payload: R\n  };\n}\nexport function setAnswer(answer) {\n  return {\n    type: SET_ANSWER,\n    payload: answer\n  };\n}\nexport function sendPoint(point) {\n  let bodyFormData = new FormData();\n  bodyFormData.append('x', point.x);\n  bodyFormData.append('y', point.y);\n  bodyFormData.append('r', point.r);\n  return dispatch => {\n    axios({\n      url: 'http://localhost:8585/hits',\n      data: bodyFormData,\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': localStorage.getItem(\"user\")\n      }\n    }).then(result => {\n      if (result.data != null) {\n        dispatch({\n          type: ADD_POINT,\n          payload: result.data\n        });\n      } else {\n        dispatch({\n          type: SET_ANSWER\n        });\n      }\n    }).catch(error => {\n      let status = error.response.message;\n      let answer = 'Error';\n      if (status === 415 || status === 400) answer = 'Ошибка';\n      if (status === 401) {\n        answer = 'Вы не прошли аутентификацию';\n        window.location = \"/\";\n      }\n      if (status === 404) answer = 'Потеряно соединение';\n      dispatch({\n        type: SET_ANSWER,\n        payload: answer\n      });\n    });\n    dispatch({\n      type: SET_X,\n      payload: null\n    });\n  };\n}\nexport function getPoints() {\n  return dispatch => {\n    axios({\n      url: 'http://localhost:8585/hits',\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': localStorage.getItem(\"user\")\n      }\n    }).then(data => {\n      dispatch({\n        type: SET_TABLE,\n        payload: data.data\n      });\n    }).catch(error => {\n      let status = error.response.status;\n      console.log(error.response.status);\n      let answer = 'Error';\n      if (status === 415 || status === 400) {\n        answer = 'Ошибка';\n        window.location = \"/\";\n      }\n      if (status === 401) {\n        answer = 'Вы не прошли аутентификацию';\n        window.location = \"/\";\n      }\n      if (status === 404) answer = 'Потеряно соединение';\n      dispatch({\n        type: SET_ANSWER,\n        payload: answer\n      });\n    });\n  };\n}","map":{"version":3,"names":["axios","SET_X","SET_Y","SET_R","ADD_POINT","SET_TABLE","SET_ANSWER","setX","X","type","payload","setY","Y","setR","R","setAnswer","answer","sendPoint","point","bodyFormData","FormData","append","x","y","r","dispatch","url","data","method","headers","localStorage","getItem","then","result","catch","error","status","response","message","window","location","getPoints","console","log"],"sources":["/Users/igorsmirnov/Downloads/lab4Web/front/src/actions/coordinatesAction.js"],"sourcesContent":["import axios from 'axios';\n\nexport const SET_X = 'SET_X';\nexport const SET_Y = 'SET_Y';\nexport const SET_R = 'SET_R';\nexport const ADD_POINT = \"ADD_POINT\";\nexport const SET_TABLE = \"SET_TABLE\";\nexport const SET_ANSWER = \"SET_ANSWER\";\n\nexport function setX(X) {\n    return {\n        type: SET_X,\n        payload: X\n    }\n}\n\nexport function setY(Y) {\n    return {\n        type: SET_Y,\n        payload: Y\n    }\n}\n\nexport function setR(R) {\n    return {\n        type: SET_R,\n        payload: R\n    }\n}\n\nexport function setAnswer(answer) {\n    return {\n        type: SET_ANSWER,\n        payload: answer\n    }\n}\nexport function sendPoint(point) {\n    let bodyFormData = new FormData();\n    bodyFormData.append('x', point.x);\n    bodyFormData.append('y', point.y);\n    bodyFormData.append('r', point.r);\n    return dispatch => {\n        axios({\n            url: 'http://localhost:8585/hits',\n            data: bodyFormData,\n            method: 'post',\n            headers: {\n                'Content-Type': 'application/json',\n                  'Authorization': localStorage.getItem(\"user\")\n            }\n        })\n            .then(result => {\n                if (result.data != null) {\n                    dispatch({\n                        type: ADD_POINT,\n                        payload: result.data,\n                    })\n                } else {\n                    dispatch({\n                        type: SET_ANSWER,\n                    })\n                }\n            })\n            .catch(error => {\n                let status = error.response.message;\n                let answer = 'Error';\n                if (status === 415 || status === 400 ) answer = 'Ошибка';\n                if (status === 401) {\n                    answer = 'Вы не прошли аутентификацию';\n                    window.location = \"/\"\n                }\n                if (status === 404) answer = 'Потеряно соединение';\n                dispatch({\n                    type: SET_ANSWER,\n                    payload: answer,\n                });\n            });\n        dispatch({\n            type: SET_X,\n            payload: null,\n        });\n    }\n}\n\nexport function getPoints() {\n    return dispatch => {\n        axios({\n            url: 'http://localhost:8585/hits',\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                  'Authorization': localStorage.getItem(\"user\")\n            }\n        }).then(data => {\n            dispatch({\n                type: SET_TABLE,\n                payload: data.data\n            })\n        }).catch(error => {\n            let status = error.response.status;\n            console.log(error.response.status);\n            let answer = 'Error';\n            if (status === 415 || status === 400) {\n                answer = 'Ошибка';\n                window.location = \"/\"\n            }\n            if (status === 401) {\n                answer = 'Вы не прошли аутентификацию';\n                window.location = \"/\"\n            }\n            if (status === 404) answer = 'Потеряно соединение';\n            dispatch({\n                type: SET_ANSWER,\n                payload: answer,\n            });\n        });\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}